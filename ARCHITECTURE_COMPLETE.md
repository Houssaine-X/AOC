# ğŸ—ï¸ Documentation d'Architecture - Gestion Commandes Multi-Canaux

> Documentation complÃ¨te de l'architecture avec diagrammes de composants, sÃ©quences, et classes.

---

## ğŸ“‹ Table des MatiÃ¨res

1. [Vue d'Ensemble](#vue-densemble)
2. [Architecture Multi-Couches](#architecture-multi-couches)
3. [Diagramme de Composants](#diagramme-de-composants)
4. [Diagrammes de SÃ©quence](#diagrammes-de-sÃ©quence)
5. [Diagramme de Classes](#diagramme-de-classes)
6. [Flux de DonnÃ©es](#flux-de-donnÃ©es)
7. [Patterns UtilisÃ©s](#patterns-utilisÃ©s)

---

## ğŸ¯ Vue d'Ensemble

### Objectif Architectural

Le systÃ¨me implÃ©mente une **architecture multi-canaux** permettant l'accÃ¨s aux services mÃ©tier via plusieurs protocoles:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLIENTS EXTERNES                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Site Web    â”‚  App Mobile  â”‚  Partenaire  â”‚  Microservices â”‚
â”‚  (SPA/React) â”‚  (iOS/And.)  â”‚  B2B Legacy  â”‚  Internes      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚               â”‚              â”‚               â”‚
       â–¼               â–¼              â–¼               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  REST  â”‚    â”‚ GraphQL  â”‚   â”‚  SOAP  â”‚     â”‚  gRPC  â”‚
   â”‚  API   â”‚    â”‚   API    â”‚   â”‚   WS   â”‚     â”‚  API   â”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
                      â”‚             â”‚             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚        COUCHE SERVICE MÃ‰TIER                â”‚
              â”‚         (OrderService)                      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚      COUCHE ACCÃˆS AUX DONNÃ‰ES                â”‚
              â”‚     (Spring Data Repositories)              â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚          BASE DE DONNÃ‰ES H2                  â”‚
              â”‚  (clients, products, orders, order_items)   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Principes Architecturaux

1. **Separation of Concerns** - SÃ©paration claire entre prÃ©sentation, mÃ©tier et donnÃ©es
2. **Dependency Injection** - Utilisation d'IoC Spring pour la gestion des dÃ©pendances
3. **Single Responsibility** - Chaque composant a une responsabilitÃ© unique
4. **Interface-based Design** - Communication via interfaces pour le dÃ©couplage
5. **Multi-Protocol Support** - Support de plusieurs protocoles sans duplication de logique

---

## ğŸ›ï¸ Architecture Multi-Couches

### Vue DÃ©taillÃ©e des Couches

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COUCHE PRÃ‰SENTATION                          â”‚
â”‚                     (web package)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   REST API    â”‚   GraphQL     â”‚     SOAP      â”‚      gRPC       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ @RestControl  â”‚ @Controller   â”‚ @Endpoint     â”‚ @GrpcService    â”‚
â”‚ - OrderRest   â”‚ - OrderGraph  â”‚ - OrderSoap   â”‚ - Notification  â”‚
â”‚   Controller  â”‚   QLControllerâ”‚   Endpoint    â”‚   ServiceImpl   â”‚
â”‚               â”‚               â”‚               â”‚                 â”‚
â”‚ HTTP/JSON     â”‚ HTTP/JSON     â”‚ HTTP/XML      â”‚ Binary/Proto    â”‚
â”‚ Port 8080     â”‚ Port 8080     â”‚ Port 8080     â”‚ Port 9090       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚               â”‚               â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COUCHE SERVICE MÃ‰TIER                        â”‚
â”‚                     (service package)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ @Service                                                        â”‚
â”‚ OrderService                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ + createOrder(CreateOrderRequest): OrderResponse        â”‚   â”‚
â”‚ â”‚ + getAllOrders(): List<OrderResponse>                   â”‚   â”‚
â”‚ â”‚ + getOrderById(Long): OrderResponse                     â”‚   â”‚
â”‚ â”‚ + getOrdersByClient(Long): List<OrderResponse>          â”‚   â”‚
â”‚ â”‚ + calculateOrderTotal(Long): BigDecimal                 â”‚   â”‚
â”‚ â”‚ + updateOrderStatus(Long, OrderStatus): OrderResponse   â”‚   â”‚
â”‚ â”‚ - validateStock(Product, int): void                     â”‚   â”‚
â”‚ â”‚ - updateProductStock(Product, int): void                â”‚   â”‚
â”‚ â”‚ - convertToResponse(Order): OrderResponse               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                COUCHE ACCÃˆS AUX DONNÃ‰ES                         â”‚
â”‚                   (repository package)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ @Repository (Spring Data JPA)                                   â”‚
â”‚                                                                 â”‚
â”‚ ClientRepository extends JpaRepository<Client, Long>           â”‚
â”‚ â”œâ”€ findByEmail(String): Optional<Client>                       â”‚
â”‚ â””â”€ findByNameContaining(String): List<Client>                  â”‚
â”‚                                                                 â”‚
â”‚ ProductRepository extends JpaRepository<Product, Long>         â”‚
â”‚ â”œâ”€ findByCategory(String): List<Product>                       â”‚
â”‚ â””â”€ findByPriceBetween(BigDecimal, BigDecimal): List<Product>   â”‚
â”‚                                                                 â”‚
â”‚ OrderRepository extends JpaRepository<Order, Long>             â”‚
â”‚ â”œâ”€ findByClient(Client): List<Order>                           â”‚
â”‚ â””â”€ findByStatus(OrderStatus): List<Order>                      â”‚
â”‚                                                                 â”‚
â”‚ OrderItemRepository extends JpaRepository<OrderItem, Long>     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COUCHE MODÃˆLE                              â”‚
â”‚                     (model package)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ @Entity (JPA Entities)                                          â”‚
â”‚                                                                 â”‚
â”‚ Client â†’ Order (OneToMany)                                      â”‚
â”‚ Order â†’ OrderItem (OneToMany)                                   â”‚
â”‚ Product â†’ OrderItem (OneToMany)                                 â”‚
â”‚ Order.status â†’ OrderStatus (Enum)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BASE DE DONNÃ‰ES H2                            â”‚
â”‚                   (In-Memory Database)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Tables:                                                         â”‚
â”‚ â€¢ clients (id, name, email, phone, address)                     â”‚
â”‚ â€¢ products (id, name, description, price, stock_quantity, cat.) â”‚
â”‚ â€¢ orders (id, client_id, order_date, status, total_amount,src) â”‚
â”‚ â€¢ order_items (id, order_id, product_id, quantity, unit_price) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© Diagramme de Composants

### Vue Globale des Composants

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         APPLICATION LAYER                          â”‚
â”‚                   GestionCommandesApplication                      â”‚
â”‚                       @SpringBootApplication                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Configuration  â”‚                              â”‚    Initializer  â”‚
â”‚    Components   â”‚                              â”‚    Components   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ WebServiceConfigâ”‚                              â”‚ DataInitializer â”‚
â”‚ GrpcServerConfigâ”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      WEB/API COMPONENTS                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚              â”‚              â”‚                      â”‚
â”‚  REST API    â”‚   GraphQL    â”‚     SOAP     â”‚       gRPC           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚              â”‚              â”‚                      â”‚
â”‚ OrderRest    â”‚ OrderGraph   â”‚ OrderSoap    â”‚ NotificationService  â”‚
â”‚ Controller   â”‚QLController  â”‚ Endpoint     â”‚ Impl                 â”‚
â”‚              â”‚              â”‚              â”‚                      â”‚
â”‚ ClientProductâ”‚              â”‚ WebService   â”‚ NotificationGrpc     â”‚
â”‚ GraphQL...   â”‚              â”‚ Config       â”‚ Client               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚              â”‚              â”‚              â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚   DTO Layer    â”‚
                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                 â”‚ CreateOrder    â”‚
                 â”‚ Request        â”‚
                 â”‚                â”‚
                 â”‚ OrderResponse  â”‚
                 â”‚                â”‚
                 â”‚ OrderItem      â”‚
                 â”‚ Request/Resp   â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ SERVICE LAYER  â”‚
                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                 â”‚ @Service       â”‚
                 â”‚ OrderService   â”‚
                 â”‚                â”‚
                 â”‚ @Autowired     â”‚
                 â”‚ - OrderRepo    â”‚
                 â”‚ - ClientRepo   â”‚
                 â”‚ - ProductRepo  â”‚
                 â”‚ - gRPC Client  â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ REPOSITORY      â”‚             â”‚  MODEL/ENTITY   â”‚
â”‚     LAYER       â”‚             â”‚      LAYER      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ @Repository     â”‚             â”‚ @Entity         â”‚
â”‚                 â”‚             â”‚                 â”‚
â”‚ OrderRepo       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Order           â”‚
â”‚ ClientRepo      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Client          â”‚
â”‚ ProductRepo     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Product         â”‚
â”‚ OrderItemRepo   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ OrderItem       â”‚
â”‚                 â”‚             â”‚                 â”‚
â”‚ JpaRepository   â”‚             â”‚ @ManyToOne      â”‚
â”‚ <T, ID>         â”‚             â”‚ @OneToMany      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          DATABASE (H2)                          â”‚
â”‚         jdbc:h2:mem:ordersdb                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Composants par Technologie

#### 1. REST API Components
```
OrderRestController
â”œâ”€ Annotations: @RestController, @RequestMapping
â”œâ”€ Endpoints:
â”‚  â”œâ”€ POST   /api/rest/orders
â”‚  â”œâ”€ GET    /api/rest/orders
â”‚  â”œâ”€ GET    /api/rest/orders/{id}
â”‚  â”œâ”€ GET    /api/rest/orders/client/{clientId}
â”‚  â”œâ”€ GET    /api/rest/orders/{id}/total
â”‚  â””â”€ PATCH  /api/rest/orders/{id}/status
â””â”€ Dependencies: OrderService
```

#### 2. GraphQL Components
```
OrderGraphQLController
â”œâ”€ Annotations: @Controller
â”œâ”€ Operations:
â”‚  â”œâ”€ @QueryMapping
â”‚  â”‚  â”œâ”€ getOrder(id)
â”‚  â”‚  â”œâ”€ getClientOrders(clientId)
â”‚  â”‚  â”œâ”€ getAllOrders()
â”‚  â”‚  â””â”€ getOrderTotal(id)
â”‚  â””â”€ @MutationMapping
â”‚     â”œâ”€ createOrder(input)
â”‚     â””â”€ updateOrderStatus(orderId, status)
â””â”€ Dependencies: OrderService

ClientProductGraphQLController
â”œâ”€ Annotations: @Controller
â”œâ”€ Operations:
â”‚  â”œâ”€ @QueryMapping: getAllClients, getAllProducts
â”‚  â””â”€ @MutationMapping: createClient, createProduct
â””â”€ Dependencies: ClientRepository, ProductRepository
```

#### 3. SOAP Components
```
OrderSoapEndpoint
â”œâ”€ Annotations: @Endpoint
â”œâ”€ Operations:
â”‚  â”œâ”€ @PayloadRoot(getOrderRequest)
â”‚  â”œâ”€ @PayloadRoot(getClientOrdersRequest)
â”‚  â”œâ”€ @PayloadRoot(createOrderRequest)
â”‚  â””â”€ @PayloadRoot(updateOrderStatusRequest)
â””â”€ Dependencies: OrderService

WebServiceConfig
â”œâ”€ Annotations: @Configuration, @EnableWs
â”œâ”€ Beans:
â”‚  â”œâ”€ MessageDispatcherServlet
â”‚  â”œâ”€ DefaultWsdl11Definition
â”‚  â””â”€ XsdSchema
â””â”€ WSDL Location: /ws/orders.wsdl
```

#### 4. gRPC Components
```
NotificationServiceImpl
â”œâ”€ Annotations: @GrpcService
â”œâ”€ Methods:
â”‚  â””â”€ sendNotification(request)
â””â”€ Port: 9090

GrpcServerConfig
â”œâ”€ Annotations: @Configuration
â””â”€ Configures: gRPC server properties
```

---

## ğŸ”„ Diagrammes de SÃ©quence

### 1. SÃ©quence: CrÃ©er une Commande (REST API)

```
Client      OrderRest      OrderService    OrderRepo    ProductRepo   gRPCClient    NotificationService
  â”‚         Controller                                                                                
  â”‚â”€â”€POSTâ”€â”€>â”‚                                                                                         
  â”‚ /orders â”‚                                                                                         
  â”‚         â”‚                                                                                         
  â”‚         â”‚â”€â”€createOrderâ”€â”€>â”‚                                                                        
  â”‚         â”‚  (request)     â”‚                                                                        
  â”‚         â”‚                â”‚                                                                        
  â”‚         â”‚                â”‚â”€â”€findByIdâ”€â”€>â”‚                                                          
  â”‚         â”‚                â”‚  (clientId) â”‚                                                          
  â”‚         â”‚                â”‚<â”€â”€Clientâ”€â”€â”€â”€â”‚                                                          
  â”‚         â”‚                â”‚                                                                        
  â”‚         â”‚                â”‚ [foreach item]                                                         
  â”‚         â”‚                â”‚â”€â”€findByIdâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚                                                    
  â”‚         â”‚                â”‚   (productId)     â”‚                                                    
  â”‚         â”‚                â”‚<â”€â”€Productâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                                    
  â”‚         â”‚                â”‚                   â”‚                                                    
  â”‚         â”‚                â”‚â”€â”€validateStock()â”€â”€â”‚                                                    
  â”‚         â”‚                â”‚                                                                        
  â”‚         â”‚                â”‚â”€â”€updateStockâ”€â”€â”€â”€â”€â”€>â”‚                                                   
  â”‚         â”‚                â”‚   (product, qty)  â”‚                                                    
  â”‚         â”‚                â”‚                   â”‚                                                    
  â”‚         â”‚                â”‚â”€â”€saveâ”€â”€>â”‚                                                              
  â”‚         â”‚                â”‚ (order) â”‚                                                              
  â”‚         â”‚                â”‚<â”€Orderâ”€â”€â”‚                                                              
  â”‚         â”‚                â”‚                                                                        
  â”‚         â”‚                â”‚â”€â”€sendNotificationâ”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                                           
  â”‚         â”‚                â”‚   (orderId, client)       â”‚                                           
  â”‚         â”‚                â”‚                           â”‚â”€â”€RPCâ”€â”€>â”‚                                  
  â”‚         â”‚                â”‚                           â”‚        â”‚ [Process Notification]          
  â”‚         â”‚                â”‚                           â”‚<â”€â”€â”€â”€â”€â”€â”€â”‚                                  
  â”‚         â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                           
  â”‚         â”‚                â”‚                                                                        
  â”‚         â”‚<â”€â”€OrderResponseâ”‚                                                                        
  â”‚         â”‚                                                                                         
  â”‚<â”€201â”€â”€â”€â”€â”‚                                                                                         
  â”‚ Created â”‚                                                                                         
  â”‚ Order   â”‚                                                                                         
```

### 2. SÃ©quence: RÃ©cupÃ©rer Commandes d'un Client (GraphQL)

```
Client     GraphQL       OrderGraphQL       OrderService    OrderRepo    ClientRepo
App        Endpoint      Controller                                      
  â”‚           â”‚              â”‚                   â”‚              â”‚            â”‚
  â”‚â”€â”€POSTâ”€â”€â”€â”€â”€>â”‚             â”‚                   â”‚              â”‚            â”‚
  â”‚ /graphql   â”‚             â”‚                   â”‚              â”‚            â”‚
  â”‚ query {    â”‚             â”‚                   â”‚              â”‚            â”‚
  â”‚   getClientâ”‚             â”‚                   â”‚              â”‚            â”‚
  â”‚   Orders   â”‚             â”‚                   â”‚              â”‚            â”‚
  â”‚ }          â”‚             â”‚                   â”‚              â”‚            â”‚
  â”‚            â”‚             â”‚                   â”‚              â”‚            â”‚
  â”‚            â”‚â”€â”€resolveâ”€â”€â”€â”€>â”‚                  â”‚              â”‚            â”‚
  â”‚            â”‚ getClient   â”‚                   â”‚              â”‚            â”‚
  â”‚            â”‚ Orders      â”‚                   â”‚              â”‚            â”‚
  â”‚            â”‚             â”‚                   â”‚              â”‚            â”‚
  â”‚            â”‚             â”‚â”€â”€getOrdersâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚             â”‚            â”‚
  â”‚            â”‚             â”‚  ByClient(id)     â”‚             â”‚            â”‚
  â”‚            â”‚             â”‚                   â”‚             â”‚            â”‚
  â”‚            â”‚             â”‚                   â”‚â”€â”€findByIdâ”€â”€â”€>â”‚            â”‚
  â”‚            â”‚             â”‚                   â”‚  (clientId) â”‚            â”‚
  â”‚            â”‚             â”‚                   â”‚<â”€â”€Clientâ”€â”€â”€â”€â”‚            â”‚
  â”‚            â”‚             â”‚                   â”‚                          â”‚
  â”‚            â”‚             â”‚                   â”‚â”€â”€findByâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚            â”‚             â”‚                   â”‚  Client(client)          â”‚
  â”‚            â”‚             â”‚                   â”‚<â”€â”€List<Order>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚            â”‚             â”‚                   â”‚                          â”‚
  â”‚            â”‚             â”‚<â”€â”€List<OrderResp>â”€â”‚                          â”‚
  â”‚            â”‚             â”‚                                              â”‚
  â”‚            â”‚<â”€â”€JSONâ”€â”€â”€â”€â”€â”€â”‚                                              â”‚
  â”‚            â”‚ response    â”‚                                              â”‚
  â”‚            â”‚                                                            â”‚
  â”‚<â”€â”€200â”€â”€â”€â”€â”€â”€â”‚                                                            â”‚
  â”‚ {orders:[]}â”‚                                                            â”‚
```

### 3. SÃ©quence: Mettre Ã  Jour Statut (SOAP)

```
Legacy     SOAP        OrderSoap       OrderService    OrderRepo    gRPCClient
System     Endpoint    Endpoint                                      
  â”‚           â”‚           â”‚                 â”‚              â”‚             â”‚
  â”‚â”€â”€SOAPâ”€â”€â”€â”€â”€>â”‚          â”‚                 â”‚              â”‚             â”‚
  â”‚ Request   â”‚           â”‚                 â”‚              â”‚             â”‚
  â”‚ <update   â”‚           â”‚                 â”‚              â”‚             â”‚
  â”‚ OrderStatusâ”‚          â”‚                 â”‚              â”‚             â”‚
  â”‚ Request>  â”‚           â”‚                 â”‚              â”‚             â”‚
  â”‚           â”‚           â”‚                 â”‚              â”‚             â”‚
  â”‚           â”‚â”€â”€@Payloadâ”€>â”‚                â”‚              â”‚             â”‚
  â”‚           â”‚  Root     â”‚                 â”‚              â”‚             â”‚
  â”‚           â”‚           â”‚                 â”‚              â”‚             â”‚
  â”‚           â”‚           â”‚â”€â”€updateOrderâ”€â”€â”€â”€>â”‚             â”‚             â”‚
  â”‚           â”‚           â”‚  Status(id,stat)â”‚             â”‚             â”‚
  â”‚           â”‚           â”‚                 â”‚             â”‚             â”‚
  â”‚           â”‚           â”‚                 â”‚â”€â”€findByIdâ”€â”€>â”‚             â”‚
  â”‚           â”‚           â”‚                 â”‚   (id)     â”‚             â”‚
  â”‚           â”‚           â”‚                 â”‚<â”€â”€Orderâ”€â”€â”€â”€â”‚             â”‚
  â”‚           â”‚           â”‚                 â”‚                          â”‚
  â”‚           â”‚           â”‚                 â”‚â”€â”€setStatus()            â”‚
  â”‚           â”‚           â”‚                 â”‚  (status)               â”‚
  â”‚           â”‚           â”‚                 â”‚                          â”‚
  â”‚           â”‚           â”‚                 â”‚â”€â”€saveâ”€â”€â”€â”€â”€â”€>â”‚            â”‚
  â”‚           â”‚           â”‚                 â”‚  (order)   â”‚            â”‚
  â”‚           â”‚           â”‚                 â”‚<â”€â”€Orderâ”€â”€â”€â”€â”‚            â”‚
  â”‚           â”‚           â”‚                 â”‚                          â”‚
  â”‚           â”‚           â”‚                 â”‚â”€â”€sendNotifâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚           â”‚           â”‚                 â”‚  (update)               â”‚
  â”‚           â”‚           â”‚                 â”‚                          â”‚
  â”‚           â”‚           â”‚<â”€â”€OrderResponseâ”€â”‚                          â”‚
  â”‚           â”‚           â”‚                                            â”‚
  â”‚           â”‚<â”€â”€SOAPâ”€â”€â”€â”€â”‚                                            â”‚
  â”‚           â”‚  Response â”‚                                            â”‚
  â”‚           â”‚  <update  â”‚                                            â”‚
  â”‚           â”‚  OrderStatus                                           â”‚
  â”‚           â”‚  Response>â”‚                                            â”‚
  â”‚           â”‚                                                        â”‚
  â”‚<â”€â”€200â”€â”€â”€â”€â”€â”‚                                                        â”‚
  â”‚ SOAP Env  â”‚                                                        â”‚
```

---

## ğŸ“¦ Diagramme de Classes

### Classes Principales

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          <<Entity>>             â”‚
â”‚           Client                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: Long                      â”‚
â”‚ - name: String                  â”‚
â”‚ - email: String                 â”‚
â”‚ - phone: String                 â”‚
â”‚ - address: String               â”‚
â”‚ - orders: List<Order>           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getId(): Long                 â”‚
â”‚ + setName(String): void         â”‚
â”‚ + getOrders(): List<Order>      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ 1
               â”‚
               â”‚ *
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          <<Entity>>             â”‚         â”‚     <<Enumeration>>     â”‚
â”‚            Order                â”‚         â”‚      OrderStatus        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: Long                      â”‚         â”‚ PENDING                 â”‚
â”‚ - client: Client                â”‚         â”‚ CONFIRMED               â”‚
â”‚ - orderDate: LocalDateTime      â”‚         â”‚ PROCESSING              â”‚
â”‚ - status: OrderStatus           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤ SHIPPED                 â”‚
â”‚ - totalAmount: BigDecimal       â”‚         â”‚ DELIVERED               â”‚
â”‚ - source: String                â”‚         â”‚ CANCELLED               â”‚
â”‚ - items: List<OrderItem>        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + calculateTotal(): BigDecimal  â”‚
â”‚ + addItem(OrderItem): void      â”‚
â”‚ + updateStatus(OrderStatus):voidâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ 1
               â”‚
               â”‚ *
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          <<Entity>>             â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          OrderItem              â”‚         â”‚     <<Entity>>          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚       Product           â”‚
â”‚ - id: Long                      â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - order: Order                  â”‚         â”‚ - id: Long              â”‚
â”‚ - product: Product              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤ - name: String          â”‚
â”‚ - quantity: Integer             â”‚    *    â”‚ - description: String   â”‚
â”‚ - unitPrice: BigDecimal         â”‚         â”‚ - price: BigDecimal     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚ - stockQuantity: Integerâ”‚
â”‚ + getSubtotal(): BigDecimal     â”‚         â”‚ - category: String      â”‚
â”‚   = quantity * unitPrice        â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ + getId(): Long         â”‚
                                            â”‚ + updateStock(int): voidâ”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      <<Service>>                                 â”‚
â”‚                     OrderService                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - orderRepository: OrderRepository                               â”‚
â”‚ - clientRepository: ClientRepository                             â”‚
â”‚ - productRepository: ProductRepository                           â”‚
â”‚ - orderItemRepository: OrderItemRepository                       â”‚
â”‚ - notificationGrpcClient: NotificationGrpcClient                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + createOrder(CreateOrderRequest): OrderResponse                 â”‚
â”‚ + getAllOrders(): List<OrderResponse>                            â”‚
â”‚ + getOrderById(Long): OrderResponse                              â”‚
â”‚ + getOrdersByClient(Long): List<OrderResponse>                   â”‚
â”‚ + calculateOrderTotal(Long): BigDecimal                          â”‚
â”‚ + updateOrderStatus(Long, OrderStatus): OrderResponse            â”‚
â”‚ - validateStock(Product, int): void                              â”‚
â”‚ - updateProductStock(Product, int): void                         â”‚
â”‚ - convertToResponse(Order): OrderResponse                        â”‚
â”‚ - convertItemToResponse(OrderItem): OrderItemResponse            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Relations entre Composants

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Controllers                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ OrderRest       â”‚ OrderGraphQL    â”‚ OrderSoap       â”‚ Notif.     â”‚
â”‚ Controller      â”‚ Controller      â”‚ Endpoint        â”‚ Service    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                 â”‚                 â”‚             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ uses
                              â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚    OrderService        â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ uses
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚               â”‚               â”‚            â”‚
              â–¼               â–¼               â–¼            â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   Order    â”‚  â”‚  Client    â”‚  â”‚  Product   â”‚  â”‚ OrderItemâ”‚
     â”‚ Repository â”‚  â”‚ Repository â”‚  â”‚ Repository â”‚  â”‚Repositoryâ”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚               â”‚               â”‚             â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ manages
                              â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Database Tables   â”‚
                   â”‚  - clients         â”‚
                   â”‚  - products        â”‚
                   â”‚  - orders          â”‚
                   â”‚  - order_items     â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒŠ Flux de DonnÃ©es

### Flux de CrÃ©ation de Commande

```
1. Client Request
   â†“
2. Controller (REST/GraphQL/SOAP)
   â”‚
   â”œâ”€ Validation de la requÃªte
   â”œâ”€ Parsing des donnÃ©es
   â””â”€ Appel au service
      â†“
3. OrderService
   â”‚
   â”œâ”€ RÃ©cupÃ©ration du client (ClientRepository)
   â”œâ”€ Validation de l'existence
   â”‚
   â”œâ”€ Pour chaque produit:
   â”‚  â”œâ”€ RÃ©cupÃ©ration du produit (ProductRepository)
   â”‚  â”œâ”€ Validation du stock disponible
   â”‚  â”œâ”€ Calcul du sous-total
   â”‚  â””â”€ Mise Ã  jour du stock
   â”‚
   â”œâ”€ CrÃ©ation de l'ordre
   â”œâ”€ Calcul du montant total
   â”œâ”€ Sauvegarde (OrderRepository)
   â”‚
   â””â”€ Envoi notification gRPC
      â†“
4. Response Mapping
   â”‚
   â”œâ”€ Conversion Order â†’ OrderResponse
   â”œâ”€ Conversion OrderItem â†’ OrderItemResponse
   â””â”€ Enrichissement des donnÃ©es (nom client, nom produit)
      â†“
5. Client Response
   â””â”€ JSON/XML selon le protocole
```

### Flux de Lecture de DonnÃ©es

```
Client â†’ Controller â†’ Service â†’ Repository â†’ Database
                                     â†“
                                   Entity
                                     â†“
                              Service (mapping)
                                     â†“
                                   DTO
                                     â†“
                               Controller
                                     â†“
                               Client (JSON/XML)
```

---

## ğŸ¯ Patterns UtilisÃ©s

### 1. Layered Architecture Pattern
```
PrÃ©sentation â†’ Service â†’ Repository â†’ Database
```
- **Avantages**: SÃ©paration des responsabilitÃ©s, testabilitÃ©, maintenabilitÃ©
- **ImplÃ©mentation**: Packages distincts (web, service, repository, model)

### 2. Dependency Injection Pattern
```java
@Service
public class OrderService {
    @Autowired
    private OrderRepository orderRepository;
    
    @Autowired
    private ClientRepository clientRepository;
}
```
- **Avantages**: DÃ©couplage, testabilitÃ©, flexibilitÃ©
- **ImplÃ©mentation**: Spring IoC Container

### 3. Repository Pattern
```java
public interface OrderRepository extends JpaRepository<Order, Long> {
    List<Order> findByClient(Client client);
    List<Order> findByStatus(OrderStatus status);
}
```
- **Avantages**: Abstraction de l'accÃ¨s aux donnÃ©es, CRUD automatique
- **ImplÃ©mentation**: Spring Data JPA

### 4. DTO Pattern (Data Transfer Object)
```java
CreateOrderRequest â†’ OrderService â†’ OrderResponse
```
- **Avantages**: DÃ©couplage entre couches, sÃ©curitÃ©, optimisation rÃ©seau
- **ImplÃ©mentation**: Classes DTO dÃ©diÃ©es

### 5. Facade Pattern
```java
OrderService // FaÃ§ade pour la logique mÃ©tier complexe
```
- **Avantages**: Interface simplifiÃ©e, encapsulation de la complexitÃ©
- **ImplÃ©mentation**: Classe de service unique

### 6. Multi-Protocol Adapter Pattern
```
REST Controller  â”
GraphQL Controller â”œâ†’ OrderService (Interface uniforme)
SOAP Endpoint     â”˜
```
- **Avantages**: Support multiple protocoles, rÃ©utilisation du code mÃ©tier
- **ImplÃ©mentation**: DiffÃ©rents controllers utilisant le mÃªme service

---

## ğŸ“Š MÃ©triques d'Architecture

### ComplexitÃ©

| Couche | Nombre de Classes | ResponsabilitÃ© |
|--------|-------------------|----------------|
| PrÃ©sentation | 7 | Exposition des APIs |
| Service | 1 | Logique mÃ©tier |
| Repository | 4 | AccÃ¨s aux donnÃ©es |
| Model | 5 | EntitÃ©s mÃ©tier |
| DTO | 4 | Transfert de donnÃ©es |
| **Total** | **21** | |

### Couplage

- **Couplage faible** entre couches (via interfaces)
- **Couplage fort** au sein d'une couche (acceptable)
- **DÃ©pendances**: Une direction (top-down)

### CohÃ©sion

- **Haute cohÃ©sion** dans chaque composant
- **ResponsabilitÃ© unique** respectÃ©e
- **Encapsulation** des dÃ©tails d'implÃ©mentation

---

## ğŸ” ConsidÃ©rations de SÃ©curitÃ©

### Points d'Exposition

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Public Endpoints (Port 8080)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ REST API: /api/rest/**               â”‚
â”‚  â€¢ GraphQL: /graphql                    â”‚
â”‚  â€¢ SOAP: /ws                            â”‚
â”‚  â€¢ H2 Console: /h2-console (dev only)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Internal Endpoints (Port 9090)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ gRPC: Internal microservices only    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Recommandations pour Production

1. **Authentification**: Ajouter Spring Security
2. **Autorisation**: RBAC (Role-Based Access Control)
3. **HTTPS**: SSL/TLS pour toutes les communications
4. **Rate Limiting**: Protection contre les abus
5. **Validation**: Input validation sur tous les endpoints
6. **Logging**: Audit trail des opÃ©rations sensibles

---

## ğŸ“ Conclusion

Cette architecture multi-canaux offre:

âœ… **FlexibilitÃ©** - Support de multiple protocoles  
âœ… **MaintenabilitÃ©** - SÃ©paration claire des responsabilitÃ©s  
âœ… **ScalabilitÃ©** - PossibilitÃ© d'ajouter de nouveaux canaux  
âœ… **TestabilitÃ©** - DÃ©couplage via interfaces  
âœ… **RÃ©utilisabilitÃ©** - Logique mÃ©tier centralisÃ©e  
âœ… **Performance** - gRPC pour communications haute performance  

---

**Date**: DÃ©cembre 2025  
**Version**: 1.0.0  
**Auteur**: Projet AcadÃ©mique

